services:
    JoppeDc\SyliusBetterSeoPlugin\Form\ProductTypeExtension:
        tags:
            - { name: form.type_extension, extended_type: Sylius\Bundle\ProductBundle\Form\Type\ProductType, priority: -5 }

    app.listener.admin.product.form.menu_builder:
        class: JoppeDc\SyliusBetterSeoPlugin\Menu\AdminProductFormMenuListener
        tags:
            - { name: kernel.event_listener, event: sylius.menu.admin.product.form, method: addItems }

    app.product_seo.form.type:
        class: JoppeDc\SyliusBetterSeoPlugin\Form\Type\SeoType
        tags:
            - { name: form.type }
        arguments: ['JoppeDc\SyliusBetterSeoPlugin\Entity\ProductSeo']

    app.product_seo_translation.form.type:
        class: JoppeDc\SyliusBetterSeoPlugin\Form\Type\SeoTranslationType
        tags:
            - { name: form.type }
        arguments: ['%sylius_better_seo_plugin.model.seo_translation.class%']

    app.block_event_listener.productpage.layout.head:
        class: Sylius\Bundle\UiBundle\Block\BlockEventListener
        arguments:
            - '@@SyliusBetterSeoPlugin/_seo_block.html.twig'
        tags:
            - { name: kernel.event_listener, event: sonata.block.event.sylius.shop.product.show.before_images, method: onBlockEvent }

    app.form.type.product_seo_translation_image:
        class: JoppeDc\SyliusBetterSeoPlugin\Form\Type\SeoTranslationImageType
        tags:
            - { name: form.type }
        arguments: ['%sylius_better_seo_plugin.model.seo_translation_image.class%']

    app.listener.product_seo_translation_images_upload:
        class: JoppeDc\SyliusBetterSeoPlugin\EventListener\ProductSeoTranslationImageUploadListener
        parent: sylius.listener.images_upload
        autowire: true
        autoconfigure: false
        public: false
        tags:
            - { name: kernel.event_listener, event: sylius.product.pre_create, method: uploadImage }
            - { name: kernel.event_listener, event: sylius.product.pre_update, method: uploadImage }
